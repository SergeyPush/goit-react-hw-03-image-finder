(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{21:function(e,t,a){e.exports=a(66)},65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),c=a.n(r),l=a(9),s=a(3),i=a(4),m=a(6),u=a(5),d=a(7),h=a(19),p=a.n(h),f=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={searchQuery:""},a.onFormSubmit=function(e){e.preventDefault(),a.setState({searchQuery:""}),a.props.onSubmit(a.state.searchQuery)},a.handleInputChange=function(e){a.setState({searchQuery:e.target.value})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.searchQuery;return o.a.createElement("div",null,o.a.createElement("form",{className:"search-form",onSubmit:this.onFormSubmit},o.a.createElement("input",{type:"text",autoComplete:"off",placeholder:"Search images...",value:e,onChange:this.handleInputChange})))}}]),t}(n.Component),g=function(e){var t=e.photo,a=e.onImageSelect,n=t.webformatURL,r=t.largeImageURL,c=t.likes,l=t.views,s=t.comments,i=t.downloads;return o.a.createElement("div",null,o.a.createElement("div",{className:"photo-card"},o.a.createElement("img",{src:n,alt:""}),o.a.createElement("div",{className:"stats"},o.a.createElement("p",{className:"stats-item"},o.a.createElement("i",{className:"material-icons"},"thumb_up"),c),o.a.createElement("p",{className:"stats-item"},o.a.createElement("i",{className:"material-icons"},"visibility"),l),o.a.createElement("p",{className:"stats-item"},o.a.createElement("i",{className:"material-icons"},"comment"),s),o.a.createElement("p",{className:"stats-item"},o.a.createElement("i",{className:"material-icons"},"cloud_download"),i)),o.a.createElement("button",{type:"button",className:"fullscreen-button",onClick:function(){a(r)}},o.a.createElement("i",{className:"material-icons"},"zoom_out_map"))))},b=function(e){var t=e.photos,a=e.onImageSelect;return o.a.createElement("ul",{className:"gallery"},t.map((function(e){return o.a.createElement(g,{key:e.id,photo:e,onImageSelect:a})})))},y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).backdropRef=Object(n.createRef)(),a.handleKeyDown=function(e){"Escape"===e.code&&a.props.closeModal()},a.handleButtonClose=function(){a.props.closeModal()},a.handleBackdropClick=function(e){a.backdropRef.current&&a.backdropRef.current!==e.target||a.props.closeModal()},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.image;return o.a.createElement("div",null,o.a.createElement("div",{className:"overlay",ref:this.backdropRef,onClick:this.handleBackdropClick,role:"presentation"},o.a.createElement("div",{className:"modal"},o.a.createElement("button",{type:"button",className:"close-button",onClick:this.handleButtonClose},o.a.createElement("i",{className:"material-icons"},"close")),o.a.createElement("img",{src:e,alt:"Selected item"}))))}}]),t}(n.Component),v=function(e){var t=e.message;return o.a.createElement("div",{style:{textAlign:"center"}},t)},E=a(20),S=a.n(E),k="12937632-34918ac446e6c937e0643541b",w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return S.a.get("https://pixabay.com/api/",{params:{key:k,q:e,image_type:"photo",orientation:"horizontal",per_page:12,page:t}})},j=(a(64),a(65),document.querySelector("#root-loader")),N=document.querySelector("#root-modal"),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={photos:[],isLoading:!1,page:1,searchQuery:"",error:null,selectedImage:null,loadMore:!1},a.onSubmit=function(e){a.setState({searchQuery:e,page:1,photos:[]})},a.onLoadMore=function(){var e=document.body.offsetHeight,t=a.state,n=t.searchQuery,o=t.page;a.setState({isLoading:!0,loadMore:!0}),w(n,o).then((function(e){a.setState((function(t){return{photos:[].concat(Object(l.a)(t.photos),Object(l.a)(e.data.hits)),page:t.page+1}}))})).catch((function(e){a.setState({error:e})})).finally((function(){a.setState({isLoading:!1,loadMore:!1}),window.scrollTo({top:e,behavior:"smooth"})}))},a.onImageSelect=function(e){a.setState({selectedImage:e})},a.closeModal=function(){a.setState({selectedImage:null})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.searchQuery;t.searchQuery!==a&&this.onLoadMore()}},{key:"render",value:function(){var e=this.state,t=e.photos,a=e.isLoading,n=e.selectedImage,c=e.error,l=e.searchQuery,s=e.loadMore;return o.a.createElement("div",null,o.a.createElement(f,{onSubmit:this.onSubmit}),c&&o.a.createElement(v,{message:c}),Object(r.createPortal)(o.a.createElement(p.a,{type:"ThreeDots",color:"#414141",height:100,width:100,className:"loader",visible:a}),j),n&&Object(r.createPortal)(o.a.createElement(y,{image:n,closeModal:this.closeModal}),N),o.a.createElement(b,{photos:t,onImageSelect:this.onImageSelect}),0===t.length&&0!==l.length&&!a&&o.a.createElement(v,{message:"Images not found"}),t.length>0&&o.a.createElement("button",{type:"button",onClick:this.onLoadMore,className:"button",disabled:s},"Load more"))}}]),t}(n.Component);c.a.render(o.a.createElement(O,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.17f2fe5e.chunk.js.map